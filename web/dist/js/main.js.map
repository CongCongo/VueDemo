{"version":3,"sources":["webpack:///webpack/bootstrap e0bbc8fb34d5b692163d","webpack:///./web/src/page/main/index.js","webpack:///./web/src/page/main/app.vue","webpack:///./web/src/page/main/app.vue?4b20","webpack:///app.vue","webpack:///./web/src/page/main/app.vue?2cd9","webpack:///./web/src/assets/img/logo.png","webpack:///./web/src/assets/css/reset.css","webpack:///./web/src/page/main/shop.vue","webpack:///shop.vue","webpack:///./web/src/lib/util.js","webpack:///./web/src/page/main/shop.vue?eb44"],"names":["Vue","filter","moment","val","format","use","VueRouter","router","hashbang","map","component","require","menu","redirect","beforeEach","transition","to","hasOwnProperty","app","current","next","start","module","exports","post","option","defaults","url","type","dataType","data","checkLogin","undefined","headers","JSON","stringify","Promise","resolve","reject","$","ajax","done","parse","error","console","log","stat","window","location","href","fail"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;ACtCA;;;;AACA;;;;AAEAA,KAAIC,MAAJ,CAAW,MAAX,EAAmB,eAAO;AACtB,YAAOC,OAAOC,GAAP,EAAYC,MAAZ,CAAmB,kBAAnB,CAAP;AACH,EAFD;;AAIAJ,KAAIK,GAAJ,CAAQC,SAAR;;AAEA,KAAIC,SAAS,IAAID,SAAJ,CAAc;AACvBE,eAAU;AADa,EAAd,CAAb;;AAIAD,QAAOE,GAAP,CAAW;AACP,cAAS;AACLC,oBAAW,mBAAAC,CAAQ,EAAR,CADN;AAELC,eAAM;AAFD;AADF,EAAX;;AAOAL,QAAOM,QAAP,CAAgB;AACZ,UAAK;AADO,EAAhB;;AAIAN,QAAOO,UAAP,CAAkB,sBAAc;AAC5B,SAAIC,WAAWC,EAAX,CAAcC,cAAd,CAA6B,MAA7B,CAAJ,EAA0C;AACtCV,gBAAOW,GAAP,CAAWC,OAAX,GAAqBJ,WAAWC,EAAX,CAAcJ,IAAnC;AACH;AACDG,gBAAWK,IAAX;AACH,EALD;;AAOAb,QAAOc,KAAP,gBAAkB,MAAlB,E;;;;;;AC/BA;AACA,sBAA2F;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gGAA+F;AAC/F;AACA,aAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,EAAC,I;;;;;;ACvBD,0C;;;;;;;;;;;;;2BCwCA;;sBAGA;AAFA;AAGA;AALA,G;;;;;;ACvCA,qhD;;;;;;ACAA,gE;;;;;;ACAA,0C;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gGAA+F;AAC/F;AACA,aAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,EAAC,I;;;;;;;;;;;;AC8FD;;;;;;;2BAEA;;;uBAGA;uBACA;uBACA;uBAEA;AALA;oBAMA;uBACA;wBACA;wBACA;mBACA;mBACA;;uBAEA;wBACA;wBACA;AAHA;wBAKA;sBACA;wBACA;AAHA;wBAKA;sBACA;wBACA;AAHA;wBAKA;sBACA;wBACA;8CACA;sCACA;AACA;AANA;wBAQA;sBACA;wBACA;8CACA;oHACA;AACA;AANA;wBAQA;sBACA;wBACA;AAHA;wBAKA;sBACA;6DACA;0QACA;AAEA;AANA;;uBAQA,iDAEA;uBACA,iDAEA;wBACA,iDAGA;AAVA;oBAWA;;uBAEA;wBACA;2BACA;uBACA;wBACA;4BACA;2BAEA;AARA;;uBAUA;wBACA;2BACA;uBACA;wBACA;4BACA;2BACA;wBAEA;AATA;;uBAWA;wBACA;2BACA;uBACA;wBACA;4BACA;2BAGA;AATA;AAjFA;AA2FA;;eAGA;;oCAEA;uCACA;8BACA;AACA;oCACA;0BACA;4CACA;uDACA;AACA;8BACA;AACA;;AACA;;;wBAEA;0BACA;uCACA;;8BAEA;;oDAGA;AAFA;AAFA,6CAKA;gDACA;+DACA;mCACA;gCACA;gEACA;AACA;AACA;AAEA;AAlBA;AAmBA;mCACA;gCACA;kBACA;AACA;;AACA;;2BACA;;sBAEA;4BACA;AAFA,qCAGA;iCACA;wCACA;wCACA;yCACA;AACA;AACA;AACA;6BACA;6BACA;AACA;;AACA;;gEACA;sCACA;AACA;AACA;;0BAEA;kCACA;AAFA,yCAGA;4CACA;mDACA;2CACA;4DACA;gCACA;4BACA;oDACA;AACA;AACA;AACA;AACA;;AACA;;iEACA;sCACA;AACA;AACA;;0BAEA;;wDAEA;sCAEA;AAHA;AAFA,yCAMA;4CACA;oDACA;4CACA;4DACA;gCACA;4BACA;6DACA;AACA;AACA;AACA;AAEA;AAhGA;6BAiGA;;qBAGA;AAFA;cAGA;AACA;AAvMA,G;;;;;;;;;;ACrHAC,QAAOC,OAAP,GAAiB;AACbC,WAAM,cAAUC,MAAV,EAAkB;AACpB,aAAIC,WAAW;AACXC,kBAAKF,OAAOE,GADD;AAEXC,mBAAM,MAFK;AAGXC,uBAAU,MAHC;AAIXC,mBAAML,OAAOK,IAAP,IAAe,EAJV;AAKXC,yBAAYN,OAAOM,UAAP,KAAsBC,SAAtB,GAAkC,IAAlC,GAAyCP,OAAOM,UALjD;AAMXE,sBAAS;AACL,iCAAgB,kBADX;AAEL,6BAAY;AAFP;AANE,UAAf;AAWAP,kBAASI,IAAT,GAAgBI,KAAKC,SAAL,CAAeT,SAASI,IAAxB,CAAhB;AACA,gBAAO,IAAIM,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCC,eAAEC,IAAF,CAAOd,QAAP,EAAiBe,IAAjB,CAAsB,gBAAQ;AAC1B,qBAAI,QAAOX,IAAP,yCAAOA,IAAP,MAAe,QAAnB,EAA6B;AACzB,yBAAI;AACAA,gCAAOI,KAAKQ,KAAL,CAAWZ,IAAX,CAAP;AACH,sBAFD,CAEE,OAAOa,KAAP,EAAc;AACZC,iCAAQC,GAAR,CAAYF,KAAZ;AACH;AACJ;AACD,qBAAIjB,SAASK,UAAT,KAAwB,IAAxB,IAAgCD,KAAKgB,IAAL,IAAa,eAAjD,EAAkE;AAC9DC,4BAAOC,QAAP,CAAgBC,IAAhB,GAAuB,YAAvB;AACH;AACDZ,yBAAQP,IAAR;AACH,cAZD,EAYGoB,IAZH,CAYQ,gBAAQ;AACZ,qBAAI,QAAOpB,IAAP,yCAAOA,IAAP,MAAe,QAAnB,EAA6B;AACzB,yBAAI;AACAA,gCAAOI,KAAKQ,KAAL,CAAWZ,IAAX,CAAP;AACH,sBAFD,CAEE,OAAOa,KAAP,EAAc;AACZC,iCAAQC,GAAR,CAAYF,KAAZ;AACH;AACJ;AACDL,wBAAOR,IAAP;AACH,cArBD;AAsBH,UAvBM,CAAP;AAwBH;AAtCY,EAAjB,C;;;;;;ACAA,goIAA+nI,eAAe,sFAAsF,eAAe,oFAAoF,gBAAgB,sFAAsF,mBAAmB,qFAAqF,gBAAgB,oFAAoF,oBAAoB,oFAAoF,mBAAmB,sFAAsF,uBAAuB,6O","file":"js/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e0bbc8fb34d5b692163d\n **/","import App from './app'\r\nimport '../../assets/css/reset.css'\r\n\r\nVue.filter('time', val => {\r\n    return moment(val).format('YYYY-MM-DD HH:mm')\r\n})\r\n\r\nVue.use(VueRouter)\r\n\r\nvar router = new VueRouter({\r\n    hashbang: true\r\n})\r\n\r\nrouter.map({\r\n    '/shop': {\r\n        component: require('./shop'),\r\n        menu: '1-1'\r\n    }\r\n})\r\n\r\nrouter.redirect({\r\n    '/': '/shop'\r\n})\r\n\r\nrouter.beforeEach(transition => {\r\n    if (transition.to.hasOwnProperty('menu')) {\r\n        router.app.current = transition.to.menu\r\n    }\r\n    transition.next()\r\n})\r\n\r\nrouter.start(App, '#app')\n\n\n/** WEBPACK FOOTER **\n ** ./web/src/page/main/index.js\n **/","var __vue_script__, __vue_template__\nrequire(\"!!../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"remove\\\":true}!css!../../../../node_modules/vue-loader/lib/style-rewriter.js?id=_v-f9706d5a&scoped=true!../../../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./app.vue\")\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!../../../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./app.vue\")\nif (__vue_script__ &&\n    __vue_script__.__esModule &&\n    Object.keys(__vue_script__).length > 1) {\n  console.warn(\"[vue-loader] web\\\\src\\\\page\\\\main\\\\app.vue: named exports in *.vue files are ignored.\")}\n__vue_template__ = require(\"!!vue-html-loader!../../../../node_modules/vue-loader/lib/template-rewriter.js?id=_v-f9706d5a!../../../../node_modules/vue-loader/lib/selector.js?type=template&index=0!./app.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\nif (module.hot) {(function () {  module.hot.accept()\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  var id = \"./app.vue\"\n  if (!module.hot.data) {\n    hotAPI.createRecord(id, module.exports)\n  } else {\n    hotAPI.update(id, module.exports, __vue_template__)\n  }\n})()}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./web/src/page/main/app.vue\n ** module id = 1\n ** module chunks = 0\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/extract-text-webpack-plugin/loader.js?{\"remove\":true}!./~/css-loader!./~/vue-loader/lib/style-rewriter.js?id=_v-f9706d5a&scoped=true!./~/vue-loader/lib/selector.js?type=style&index=0!./web/src/page/main/app.vue\n ** module id = 2\n ** module chunks = 0\n **/","<template>\r\n    <div class=\"layout\">\r\n        <div class=\"layout-nav\">\r\n            <img src=\"../../assets/img/logo.png\" class=\"nav-logo\">\r\n        </div>\r\n        <div class=\"layout-menu\">\r\n            <Menu :active-key=\"current\" width=\"auto\" :open-keys=\"['1', '2', '3']\">\r\n                <Submenu key=\"1\">\r\n                    <template slot=\"title\">\r\n                        <Icon type=\"ios-navigate\"></Icon>\r\n                        商家管理\r\n                    </template>\r\n                    <Menu-item key=\"1-1\">商家列表</Menu-item>\r\n                </Submenu>\r\n                <Submenu key=\"2\">\r\n                    <template slot=\"title\">\r\n                        <Icon type=\"ios-keypad\"></Icon>\r\n                        商品管理\r\n                    </template>\r\n                    <Menu-item key=\"2-1\">商品列表</Menu-item>\r\n                    <Menu-item key=\"2-2\">商品分类</Menu-item>\r\n                </Submenu>\r\n                <Submenu key=\"3\">\r\n                    <template slot=\"title\">\r\n                        <Icon type=\"ios-analytics\"></Icon>\r\n                        用户管理\r\n                    </template>\r\n                    <Menu-item key=\"3-1\">用户列表</Menu-item>\r\n                </Submenu>\r\n            </Menu>\r\n        </div>\r\n        <div class=\"layout-content\">\r\n            <router-view></router-view>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                current: ''\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .layout {\r\n        width: 100%;\r\n        height: 100%;\r\n        overflow: hidden;\r\n        position: relative;\r\n        background: #f5f7f9;\r\n    }\r\n    \r\n    .layout-nav {\r\n        width: 100%;\r\n        height: 60px;\r\n        background-color: #464c5b;\r\n        color: #9ea7b4;\r\n    }\r\n\r\n    .nav-logo {\r\n        height: 50px;\r\n        margin-top: 5px;\r\n        margin-left: 15px;\r\n    }\r\n    \r\n    .layout-menu {\r\n        position: absolute;\r\n        width: 220px;\r\n        top: 60px;\r\n        bottom: 0;\r\n        left: 0;\r\n        background: #fff;\r\n        overflow: auto;\r\n    }\r\n\r\n    .layout-menu .ivu-menu {\r\n        height: 100%;\r\n    }\r\n    \r\n    .layout-content {\r\n        position: absolute;\r\n        top: 60px;\r\n        left: 220px;\r\n        right: 0;\r\n        bottom: 0;\r\n        overflow: auto;\r\n        padding: 20px;\r\n    }\r\n</style>\n\n\n/** WEBPACK FOOTER **\n ** app.vue?7efd0918\n **/","module.exports = \"\\n<div class=\\\"layout\\\" _v-f9706d5a=\\\"\\\">\\n    <div class=\\\"layout-nav\\\" _v-f9706d5a=\\\"\\\">\\n        <img src=\\\"\" + require(\"../../assets/img/logo.png\") + \"\\\" class=\\\"nav-logo\\\" _v-f9706d5a=\\\"\\\">\\n    </div>\\n    <div class=\\\"layout-menu\\\" _v-f9706d5a=\\\"\\\">\\n        <menu :active-key=\\\"current\\\" width=\\\"auto\\\" :open-keys=\\\"['1', '2', '3']\\\" _v-f9706d5a=\\\"\\\">\\n            <submenu key=\\\"1\\\" _v-f9706d5a=\\\"\\\">\\n                <template slot=\\\"title\\\">\\n                    <icon type=\\\"ios-navigate\\\" _v-f9706d5a=\\\"\\\"></icon>\\n                    商家管理\\n                </template>\\n                <menu-item key=\\\"1-1\\\" _v-f9706d5a=\\\"\\\">商家列表</menu-item>\\n            </submenu>\\n            <submenu key=\\\"2\\\" _v-f9706d5a=\\\"\\\">\\n                <template slot=\\\"title\\\">\\n                    <icon type=\\\"ios-keypad\\\" _v-f9706d5a=\\\"\\\"></icon>\\n                    商品管理\\n                </template>\\n                <menu-item key=\\\"2-1\\\" _v-f9706d5a=\\\"\\\">商品列表</menu-item>\\n                <menu-item key=\\\"2-2\\\" _v-f9706d5a=\\\"\\\">商品分类</menu-item>\\n            </submenu>\\n            <submenu key=\\\"3\\\" _v-f9706d5a=\\\"\\\">\\n                <template slot=\\\"title\\\">\\n                    <icon type=\\\"ios-analytics\\\" _v-f9706d5a=\\\"\\\"></icon>\\n                    用户管理\\n                </template>\\n                <menu-item key=\\\"3-1\\\" _v-f9706d5a=\\\"\\\">用户列表</menu-item>\\n            </submenu>\\n        </menu>\\n    </div>\\n    <div class=\\\"layout-content\\\" _v-f9706d5a=\\\"\\\">\\n        <router-view _v-f9706d5a=\\\"\\\"></router-view>\\n    </div>\\n</div>\\n\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vue-html-loader!./~/vue-loader/lib/template-rewriter.js?id=_v-f9706d5a!./~/vue-loader/lib/selector.js?type=template&index=0!./web/src/page/main/app.vue\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = __webpack_public_path__ + \"img/logo.fe8d29.png\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./web/src/assets/img/logo.png\n ** module id = 6\n ** module chunks = 0\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./web/src/assets/css/reset.css\n ** module id = 7\n ** module chunks = 0\n **/","var __vue_script__, __vue_template__\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!../../../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./shop.vue\")\nif (__vue_script__ &&\n    __vue_script__.__esModule &&\n    Object.keys(__vue_script__).length > 1) {\n  console.warn(\"[vue-loader] web\\\\src\\\\page\\\\main\\\\shop.vue: named exports in *.vue files are ignored.\")}\n__vue_template__ = require(\"!!vue-html-loader!../../../../node_modules/vue-loader/lib/selector.js?type=template&index=0!./shop.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\nif (module.hot) {(function () {  module.hot.accept()\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  var id = \"./shop.vue\"\n  if (!module.hot.data) {\n    hotAPI.createRecord(id, module.exports)\n  } else {\n    hotAPI.update(id, module.exports, __vue_template__)\n  }\n})()}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./web/src/page/main/shop.vue\n ** module id = 10\n ** module chunks = 0\n **/","<template>\r\n    <div>\r\n        <div class=\"toolbar\">\r\n            <i-form :model=\"search\" inline>\r\n                <form-item>\r\n                    <i-button type=\"primary\" icon=\"plus\" @click=\"add\">新增商家</i-button>\r\n                </form-item>\r\n                <form-item>\r\n                    <i-input type=\"text\" :value.sync=\"params.name\" placeholder=\"商家名称\"></i-input>\r\n                </form-item>\r\n                <form-item>\r\n                    <i-input type=\"text\" :value.sync=\"params.addr\" placeholder=\"商家地址\"></i-input>\r\n                </form-item>\r\n                <form-item>\r\n                    <i-button type=\"primary\" icon=\"ios-search\" @click=\"search\">搜索</i-button>\r\n                </form-item>\r\n            </i-form>\r\n        </div>\r\n        <i-table border :content=\"self\" :columns=\"columns\" :data=\"rows\"></i-table>\r\n        <div class=\"page-wrap\">\r\n            <Page :total=\"total\" show-total :current.sync=\"params.page\" @on-change=\"getData\" :page-size=\"15\"></Page>\r\n        </div>\r\n        <Modal :visible.sync=\"addModal\" title=\"新增商家\">\r\n            <i-form v-ref:addformmodal :label-width=\"80\" :model=\"addform\" :rules=\"rules\">\r\n                <Form-item label=\"商家名称\" prop=\"name\">\r\n                    <i-input :value.sync=\"addform.name\" placeholder=\"商家名称\"></i-input>\r\n                </Form-item>\r\n                <Form-item label=\"商家地址\" prop=\"addr\">\r\n                    <i-input :value.sync=\"addform.addr\" placeholder=\"商家地址\"></i-input>\r\n                </Form-item>\r\n                <Form-item label=\"电话\" prop=\"phone\">\r\n                    <i-input :value.sync=\"addform.phone\" placeholder=\"电话\"></i-input>\r\n                </Form-item>\r\n                <Form-item label=\"人均消费\">\r\n                    <i-input :value.sync=\"addform.avgprice\" placeholder=\"人均消费\"></i-input>\r\n                </Form-item>\r\n                <Form-item label=\"平均分\">\r\n                    <i-input :value.sync=\"addform.score\" placeholder=\"平均分\"></i-input>\r\n                </Form-item>\r\n                <Form-item label=\"经度\">\r\n                    <i-input :value.sync=\"addform.longitude\" placeholder=\"经度\"></i-input>\r\n                </Form-item>\r\n                <Form-item label=\"纬度\">\r\n                    <i-input :value.sync=\"addform.latitude\" placeholder=\"纬度\"></i-input>\r\n                </Form-item>\r\n            </i-form>\r\n            <div slot=\"footer\" class=\"modal-footer\">\r\n                <i-button size=\"large\" type=\"text\" @click=\"addModal=false\">取消</i-button>\r\n                <i-button size=\"large\" type=\"primary\" @click=\"create\">确定</i-button>\r\n            </div>\r\n        </Modal>\r\n        <Modal :visible.sync=\"editModal\" title=\"编辑商家\">\r\n            <i-form v-ref:editformmodal :label-width=\"80\" :model=\"editform\" :rules=\"rules\">\r\n                <Form-item label=\"商家名称\" prop=\"name\">\r\n                    <i-input :value.sync=\"editform.name\" placeholder=\"商家名称\"></i-input>\r\n                </Form-item>\r\n                <Form-item label=\"商家地址\" prop=\"addr\">\r\n                    <i-input :value.sync=\"editform.addr\" placeholder=\"商家地址\"></i-input>\r\n                </Form-item>\r\n                <Form-item label=\"电话\" prop=\"phone\">\r\n                    <i-input :value.sync=\"editform.phone\" placeholder=\"电话\"></i-input>\r\n                </Form-item>\r\n                <Form-item label=\"人均消费\">\r\n                    <i-input :value.sync=\"editform.avgprice\" placeholder=\"人均消费\"></i-input>\r\n                </Form-item>\r\n                <Form-item label=\"平均分\">\r\n                    <i-input :value.sync=\"editform.score\" placeholder=\"平均分\"></i-input>\r\n                </Form-item>\r\n                <Form-item label=\"经度\">\r\n                    <i-input :value.sync=\"editform.longitude\" placeholder=\"经度\"></i-input>\r\n                </Form-item>\r\n                <Form-item label=\"纬度\">\r\n                    <i-input :value.sync=\"editform.latitude\" placeholder=\"纬度\"></i-input>\r\n                </Form-item>\r\n            </i-form>\r\n            <div slot=\"footer\" class=\"modal-footer\">\r\n                <i-button size=\"large\" type=\"text\" @click=\"editModal=false\">取消</i-button>\r\n                <i-button size=\"large\" type=\"primary\" @click=\"update\">确定</i-button>\r\n            </div>\r\n        </Modal>\r\n        <Modal :visible.sync=\"viewModal\" title=\"查看详情\">\r\n            <i-form :label-width=\"80\">\r\n                <Form-item label=\"商家名称\">\r\n                    {{viewform.name}}\r\n                </Form-item>\r\n                <Form-item label=\"商家地址\">\r\n                    {{viewform.addr}}\r\n                </Form-item>\r\n                <Form-item label=\"电话\">\r\n                    {{viewform.phone}}\r\n                </Form-item>\r\n                <Form-item label=\"人均消费\">\r\n                    {{viewform.avgprice}}\r\n                </Form-item>\r\n                <Form-item label=\"平均分\">\r\n                    {{viewform.score}}\r\n                </Form-item>\r\n                <Form-item label=\"经度\">\r\n                    {{viewform.longitude}}\r\n                </Form-item>\r\n                <Form-item label=\"纬度\">\r\n                    {{viewform.latitude}}\r\n                </Form-item>\r\n                <Form-item label=\"添加时间\">\r\n                    {{viewform.ctime | time}}\r\n                </Form-item>\r\n            </i-form>\r\n            <div slot=\"footer\" class=\"modal-footer\">\r\n                <i-button size=\"large\" type=\"primary\" @click=\"viewModal=false\">确定</i-button>\r\n            </div>\r\n        </Modal>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import util from '../../lib/util'\r\n    export default {\r\n        data() {\r\n            return {\r\n                params: {\r\n                    name: '',\r\n                    addr: '',\r\n                    page: 1,\r\n                    size: 15\r\n                },\r\n                total: 0,\r\n                addModal: false,\r\n                viewModal: false,\r\n                editModal: false,\r\n                self: this,\r\n                rows: [],\r\n                columns: [{\r\n                    type: 'index',\r\n                    width: 60,\r\n                    align: 'center'\r\n                }, {\r\n                    title: '商家名称',\r\n                    key: 'name',\r\n                    width: 250\r\n                }, {\r\n                    title: '商家地址',\r\n                    key: 'addr',\r\n                    width: 400\r\n                }, {\r\n                    title: '人均',\r\n                    key: 'avgprice',\r\n                    width: 100,\r\n                    render(row) {\r\n                        return '￥' + row.avgprice\r\n                    }\r\n                }, {\r\n                    title: '平均分',\r\n                    key: 'score',\r\n                    width: 200,\r\n                    render(row) {\r\n                        return `<Rate show-text :value=\"${row.score}\" disabled><span class=\"rate-color\">{{${row.score}}}</span></Rate>`\r\n                    }\r\n                }, {\r\n                    title: '电话',\r\n                    key: 'phone',\r\n                    width: 200\r\n                }, {\r\n                    title: '操作',\r\n                    key: 'option',\r\n                    render(row, column, index) {\r\n                        return `<i-button type=\"primary\" size=\"small\" @click=\"show(${index})\">查看</i-button> <i-button type=\"primary\" size=\"small\" @click=\"edit(${index})\">编辑</i-button> <i-button type=\"error\" size=\"small\" @click=\"remove(${index})\">删除</i-button>`\r\n                    }\r\n                }],\r\n                rules: {\r\n                    name: [\r\n                        { required: true, message: '商家名称不能为空', trigger: 'blur' }\r\n                    ],\r\n                    addr: [\r\n                        { required: true, message: '商家地址不能为空', trigger: 'blur' }\r\n                    ],\r\n                    phone: [\r\n                        { required: true, message: '商家电话不能为空', trigger: 'blur' }\r\n                    ]\r\n                },\r\n                index: 0,\r\n                addform: {\r\n                    name: '',\r\n                    score: 0,\r\n                    avgprice: 0,\r\n                    addr: '',\r\n                    phone: '',\r\n                    longitude: 0,\r\n                    latitude: 0\r\n                },\r\n                viewform: {\r\n                    name: '',\r\n                    score: 0,\r\n                    avgprice: 0,\r\n                    addr: '',\r\n                    phone: '',\r\n                    longitude: 0,\r\n                    latitude: 0,\r\n                    ctime: ''\r\n                },\r\n                editform: {\r\n                    name: '',\r\n                    score: 0,\r\n                    avgprice: 0,\r\n                    addr: '',\r\n                    phone: '',\r\n                    longitude: 0,\r\n                    latitude: 0\r\n                }\r\n            }\r\n        },\r\n        computed: {\r\n\r\n        },\r\n        methods: {\r\n            show(index) {\r\n                this.viewform = this.rows[index]\r\n                this.viewModal = true\r\n            },\r\n            edit(index) {\r\n                this.index = index\r\n                for (var key in this.editform) {\r\n                    this.editform[key] = this.rows[index][key]\r\n                }\r\n                this.editModal = true\r\n            },\r\n            remove(index) {\r\n                this.$Modal.confirm({\r\n                    title: '确定要删除该记录吗？',\r\n                    content: '<p>一旦删除不可恢复</p>',\r\n                    onOk: () => {\r\n                        util.post({\r\n                            url: '/shop/remove',\r\n                            data: {\r\n                                _id: this.rows[index]._id\r\n                            }\r\n                        }).then(data => {\r\n                            if (data.stat == 'OK') {\r\n                                this.$Message.success('数据删除成功！', 3)\r\n                                this.getData()\r\n                            } else {\r\n                                this.$Message.error(data.message, 3)\r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n            },\r\n            search() {\r\n                this.params.page = 1\r\n                this.getData()\r\n            },\r\n            getData() {\r\n                this.$Loading.start()\r\n                util.post({\r\n                    url: '/shop/list',\r\n                    data: this.params\r\n                }).then(data => {\r\n                    this.$Loading.finish()\r\n                    if (data.stat == 'OK') {\r\n                        this.rows = data.rows\r\n                        this.total = data.total\r\n                    }\r\n                })\r\n            },\r\n            add() {\r\n                this.addModal = true\r\n            },\r\n            create() {\r\n                this.$refs.addformmodal.validate(result => {\r\n                    if (result == false) {\r\n                        return\r\n                    }\r\n                    util.post({\r\n                        url: '/shop/create',\r\n                        data: this.addform\r\n                    }).then(data => {\r\n                        if (data.stat == 'OK') {\r\n                            this.$refs.addformmodal.resetFields()\r\n                            this.addModal = false\r\n                            this.$Message.success('数据添加成功！', 3)\r\n                            this.getData()\r\n                        } else {\r\n                            this.$Message.error(data.message)\r\n                        }\r\n                    })\r\n                })\r\n            },\r\n            update() {\r\n                this.$refs.editformmodal.validate(result => {\r\n                    if (result == false) {\r\n                        return\r\n                    }\r\n                    util.post({\r\n                        url: '/shop/update',\r\n                        data: {\r\n                            _id: this.rows[this.index]._id,\r\n                            data: this.editform\r\n                        }\r\n                    }).then(data => {\r\n                        if (data.stat == 'OK') {\r\n                            this.$refs.editformmodal.resetFields()\r\n                            this.editModal = false\r\n                            this.$Message.success('数据更新成功！', 3)\r\n                            this.getData()\r\n                        } else {\r\n                            this.$Message.error(data.message, 3)\r\n                        }\r\n                    })\r\n                })\r\n            }\r\n        },\r\n        ready() {\r\n            this.$Loading.config({\r\n                height: 4\r\n            })\r\n            this.getData()\r\n        }\r\n    }\r\n\r\n</script>\n\n\n/** WEBPACK FOOTER **\n ** shop.vue?b183d8a2\n **/","module.exports = {\r\n    post: function (option) {\r\n        var defaults = {\r\n            url: option.url,\r\n            type: 'POST',\r\n            dataType: 'json',\r\n            data: option.data || {},\r\n            checkLogin: option.checkLogin === undefined ? true : option.checkLogin,\r\n            headers: {\r\n                'COntent-Type': 'application/json',\r\n                'X-Device': 'Web'\r\n            }\r\n        }\r\n        defaults.data = JSON.stringify(defaults.data)\r\n        return new Promise((resolve, reject) => {\r\n            $.ajax(defaults).done(data => {\r\n                if (typeof data != 'object') {\r\n                    try {\r\n                        data = JSON.parse(data)\r\n                    } catch (error) {\r\n                        console.log(error)\r\n                    }\r\n                }\r\n                if (defaults.checkLogin === true && data.stat == 'ERR_NOT_LOGIN') {\r\n                    window.location.href = 'login.html'\r\n                }\r\n                resolve(data)\r\n            }).fail(data => {\r\n                if (typeof data != 'object') {\r\n                    try {\r\n                        data = JSON.parse(data)\r\n                    } catch (error) {\r\n                        console.log(error)\r\n                    }\r\n                }\r\n                reject(data)\r\n            })\r\n        })\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./web/src/lib/util.js\n **/","module.exports = \"\\n<div>\\n    <div class=\\\"toolbar\\\">\\n        <i-form :model=\\\"search\\\" inline>\\n            <form-item>\\n                <i-button type=\\\"primary\\\" icon=\\\"plus\\\" @click=\\\"add\\\">新增商家</i-button>\\n            </form-item>\\n            <form-item>\\n                <i-input type=\\\"text\\\" :value.sync=\\\"params.name\\\" placeholder=\\\"商家名称\\\"></i-input>\\n            </form-item>\\n            <form-item>\\n                <i-input type=\\\"text\\\" :value.sync=\\\"params.addr\\\" placeholder=\\\"商家地址\\\"></i-input>\\n            </form-item>\\n            <form-item>\\n                <i-button type=\\\"primary\\\" icon=\\\"ios-search\\\" @click=\\\"search\\\">搜索</i-button>\\n            </form-item>\\n        </i-form>\\n    </div>\\n    <i-table border :content=\\\"self\\\" :columns=\\\"columns\\\" :data=\\\"rows\\\"></i-table>\\n    <div class=\\\"page-wrap\\\">\\n        <Page :total=\\\"total\\\" show-total :current.sync=\\\"params.page\\\" @on-change=\\\"getData\\\" :page-size=\\\"15\\\"></Page>\\n    </div>\\n    <Modal :visible.sync=\\\"addModal\\\" title=\\\"新增商家\\\">\\n        <i-form v-ref:addformmodal :label-width=\\\"80\\\" :model=\\\"addform\\\" :rules=\\\"rules\\\">\\n            <Form-item label=\\\"商家名称\\\" prop=\\\"name\\\">\\n                <i-input :value.sync=\\\"addform.name\\\" placeholder=\\\"商家名称\\\"></i-input>\\n            </Form-item>\\n            <Form-item label=\\\"商家地址\\\" prop=\\\"addr\\\">\\n                <i-input :value.sync=\\\"addform.addr\\\" placeholder=\\\"商家地址\\\"></i-input>\\n            </Form-item>\\n            <Form-item label=\\\"电话\\\" prop=\\\"phone\\\">\\n                <i-input :value.sync=\\\"addform.phone\\\" placeholder=\\\"电话\\\"></i-input>\\n            </Form-item>\\n            <Form-item label=\\\"人均消费\\\">\\n                <i-input :value.sync=\\\"addform.avgprice\\\" placeholder=\\\"人均消费\\\"></i-input>\\n            </Form-item>\\n            <Form-item label=\\\"平均分\\\">\\n                <i-input :value.sync=\\\"addform.score\\\" placeholder=\\\"平均分\\\"></i-input>\\n            </Form-item>\\n            <Form-item label=\\\"经度\\\">\\n                <i-input :value.sync=\\\"addform.longitude\\\" placeholder=\\\"经度\\\"></i-input>\\n            </Form-item>\\n            <Form-item label=\\\"纬度\\\">\\n                <i-input :value.sync=\\\"addform.latitude\\\" placeholder=\\\"纬度\\\"></i-input>\\n            </Form-item>\\n        </i-form>\\n        <div slot=\\\"footer\\\" class=\\\"modal-footer\\\">\\n            <i-button size=\\\"large\\\" type=\\\"text\\\" @click=\\\"addModal=false\\\">取消</i-button>\\n            <i-button size=\\\"large\\\" type=\\\"primary\\\" @click=\\\"create\\\">确定</i-button>\\n        </div>\\n    </Modal>\\n    <Modal :visible.sync=\\\"editModal\\\" title=\\\"编辑商家\\\">\\n        <i-form v-ref:editformmodal :label-width=\\\"80\\\" :model=\\\"editform\\\" :rules=\\\"rules\\\">\\n            <Form-item label=\\\"商家名称\\\" prop=\\\"name\\\">\\n                <i-input :value.sync=\\\"editform.name\\\" placeholder=\\\"商家名称\\\"></i-input>\\n            </Form-item>\\n            <Form-item label=\\\"商家地址\\\" prop=\\\"addr\\\">\\n                <i-input :value.sync=\\\"editform.addr\\\" placeholder=\\\"商家地址\\\"></i-input>\\n            </Form-item>\\n            <Form-item label=\\\"电话\\\" prop=\\\"phone\\\">\\n                <i-input :value.sync=\\\"editform.phone\\\" placeholder=\\\"电话\\\"></i-input>\\n            </Form-item>\\n            <Form-item label=\\\"人均消费\\\">\\n                <i-input :value.sync=\\\"editform.avgprice\\\" placeholder=\\\"人均消费\\\"></i-input>\\n            </Form-item>\\n            <Form-item label=\\\"平均分\\\">\\n                <i-input :value.sync=\\\"editform.score\\\" placeholder=\\\"平均分\\\"></i-input>\\n            </Form-item>\\n            <Form-item label=\\\"经度\\\">\\n                <i-input :value.sync=\\\"editform.longitude\\\" placeholder=\\\"经度\\\"></i-input>\\n            </Form-item>\\n            <Form-item label=\\\"纬度\\\">\\n                <i-input :value.sync=\\\"editform.latitude\\\" placeholder=\\\"纬度\\\"></i-input>\\n            </Form-item>\\n        </i-form>\\n        <div slot=\\\"footer\\\" class=\\\"modal-footer\\\">\\n            <i-button size=\\\"large\\\" type=\\\"text\\\" @click=\\\"editModal=false\\\">取消</i-button>\\n            <i-button size=\\\"large\\\" type=\\\"primary\\\" @click=\\\"update\\\">确定</i-button>\\n        </div>\\n    </Modal>\\n    <Modal :visible.sync=\\\"viewModal\\\" title=\\\"查看详情\\\">\\n        <i-form :label-width=\\\"80\\\">\\n            <Form-item label=\\\"商家名称\\\">\\n                {{viewform.name}}\\n            </Form-item>\\n            <Form-item label=\\\"商家地址\\\">\\n                {{viewform.addr}}\\n            </Form-item>\\n            <Form-item label=\\\"电话\\\">\\n                {{viewform.phone}}\\n            </Form-item>\\n            <Form-item label=\\\"人均消费\\\">\\n                {{viewform.avgprice}}\\n            </Form-item>\\n            <Form-item label=\\\"平均分\\\">\\n                {{viewform.score}}\\n            </Form-item>\\n            <Form-item label=\\\"经度\\\">\\n                {{viewform.longitude}}\\n            </Form-item>\\n            <Form-item label=\\\"纬度\\\">\\n                {{viewform.latitude}}\\n            </Form-item>\\n            <Form-item label=\\\"添加时间\\\">\\n                {{viewform.ctime | time}}\\n            </Form-item>\\n        </i-form>\\n        <div slot=\\\"footer\\\" class=\\\"modal-footer\\\">\\n            <i-button size=\\\"large\\\" type=\\\"primary\\\" @click=\\\"viewModal=false\\\">确定</i-button>\\n        </div>\\n    </Modal>\\n</div>\\n\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./web/src/page/main/shop.vue\n ** module id = 13\n ** module chunks = 0\n **/"],"sourceRoot":""}